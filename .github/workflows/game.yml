name: Build Game Script

on:
  push:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build:
    permissions:
       contents: write
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v5
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: 9.0.x
      - name: Switch to master branch
        run: |
          git fetch origin
          git checkout master
      - name: Clean
        run: del assets\scripts\game.*
      - name: Build
        run: dotnet build game -c Release
      - name: Configure git user information
        run: |
          git config --local user.email "noreply.tagb@localhost"
          git config --local user.name "[BOT] The Automatic Game Builder"
      - name: Commit & Push
        run: |
          git add .
          git commit -m "Update the game script file"
          git push


