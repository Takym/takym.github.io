---
layout: post
title: "【初心者向け】dotnet コマンドの使い方"
authors: Takym
tags:
  - .NET
category: primers
---
Copyright (C) 2025 Takym.

## 概要
この記事では、「.NET SDK」に付属している `dotnet` コマンドの使い方を重要な機能に絞って解説します。C# と Visual Studio Code でソフトウェア開発を行うには、必ず `dotnet` コマンドを使う事になります。プログラムの実行に欠かせないツールとなっています。尚、.NET は 9.0 以上のバージョンを想定しており、過去のバージョンでの動作は保証しません。また、OS は Windows 10 以降を想定しております。

## 用語
解説に入る前に、各用語を簡易的に説明します。一部は長文になってしまいましたが、それでも厳密な説明ではないという事に注意してください。詳細且つ厳密な定義は辞書や辞典、参考書などをご自身でご検索ください。ここで説明していない用語についても、分からなければ、ご自身でお調べください。用語の意味が理解できる方は読み飛ばしても構いません。

* **機械語**
	* この記事においては「コンピュータが直接実行できる言語」と理解できていれば充分です。
* **プログラミング言語**
	* 厳密には正しくありませんが、簡単に「人間が理解し易い形でプログラムを開発する為の言語」とお考えください。
	* その目的を実現できずに難解な文法になっている場合も確かにありますし、習得しなければ扱うのは難しいです。習得すれば簡単に感じられるでしょう。怖気付く必要はありません。
* **ソースコード**
	* プログラミング言語で書かれた文章・文字の羅列の事を言います。
	* 「ソース」（Source）は情報源を意味します。コンピュータにとってソースコードは実行すべきプログラムの情報源にあたるのです。逆に機械語の事は翻訳対象（Target、ターゲット）と捉えられる事もあります。
	* 「コード」（Code）は暗号や信号、規則、体系的な符号などの意味合いがあります。
* **コンパイラ言語**
	* ソースコードを機械語に変換し、そのデータを実行可能ファイルに保存し、実行可能ファイルを実行する形式です。
		* 実行可能ファイルとは、機械語を含んでいるファイルの事です。
			* Windows であれば拡張子は「`*.exe`」になります。
		* この機械語に変換するプログラムの事を**コンパイラ**と呼びます。
	* 実行可能ファイルではなくライブラリに変換される事もあります。
		* ライブラリは、プログラムの図書館であり、他のプログラムから呼び出される事を前提としています。
		* この前提の為、ライブラリファイルは直接起動する事ができません。
		* この仕組みを使って同じプログラムを別のプログラムから再利用する事ができます。
		* ライブラリの参照には**静的リンク**と**動的リンク**の二つの方式があります。
			* **静的リンク**は、コンパイル時にプログラムが結合されます。
				* 動的リンクより速くなる場合もありますが、プログラムの容量が大きくなってしまいます。
				* また、知的財産権の取り扱いがやや複雑になります。
			* **動的リンク**は、実行時に OS によってプログラムが結合されます。
				* ライブラリの検索や読み込みなどに時間が掛かってしまう（現代的なコンピュータでは無視できるレベルです）ものの、部分的な更新や同じプログラムを重複して保持する必要が無いなどの利点があります。
		* .NET の場合は、拡張子は「`*.dll`」になり、動的リンクが主に使われております。実は Windows と同じ拡張子を用いています。
	* 配布する時は、実行可能ファイルのみで良く、ソースコードを含める必要はありません。
	* 後述する JIT 言語（<u>J</u>ust <u>i</u>n <u>T</u>ime、実行時コンパイラ言語）との対比で、AOT 言語（<u>A</u>head <u>o</u>f <u>T</u>ime、事前コンパイラ言語）と呼ばれる事もあります。
* **インタープリタ言語**
	* ソースコードを逐一機械語へ翻訳しながら実行する形式です。
		* この翻訳から実行までを行うプログラムの事を**インタープリタ**と呼びます。
	* コンパイラ言語と比べて動作が遅くなりますが、コンパイルしてから起動するという手間がありません。
	* また、インタープリタそのものを移植すれば、何れの環境でも実行する事ができます。
	* スクリプト言語と呼ばれる事もあります。
* **JIT 言語**（<u>J</u>ust <u>i</u>n <u>T</u>ime、実行時コンパイラ言語）
	* コンパイラ言語とインタープリタ言語の良い所取りを行った様な仕組みです。
	* まずは、ソースコードを中間言語に翻訳しておきます。
		* 中間言語を用いない場合もあります。
	* 実行時に中間言語を機械語に翻訳する点はインタープリタ言語と同じですが、その翻訳結果がキャッシュされ使い回されるという違いがあります。
		* インタープリタ言語では同じソースコードが実行の度に翻訳されてしまい実行速度が低下していましたが、JIT 言語では翻訳は一度しか行われません。
	* 通常のインタープリタ言語より速く動作させる事ができ、移植すれば何れの環境でも実行できるという強みがあります。
		* ただし、最初の呼び出しには時間が掛かってしまいます。
	* C# も JIT 言語の一つです。.NET ランタイムさえあれば何れの環境でも実行できます。
* **リソース**
	* プログラムで用いられる関連ファイルやデータの事です。
	* 簡単に実行時に必要なソースコード以外のファイルとお考えください。
* **SDK**（<u>S</u>oftware <u>D</u>evelopment <u>K</u>it、ソフトウェア開発キット）
	* ソフトウェア開発に必要なツール類やライブラリをまとめたものです。
		* コンパイラやインタープリタやランタイムやその他の色々な便利なツールが含まれています。
	* .NET SDK には .NET ランタイムや C# コンパイラなどが含まれています。`dotnet` コマンドも .NET SDK に含まれているツールの一つです。
	* IDE（<u>I</u>ntegrated <u>D</u>evelopment <u>E</u>nvironment、統合開発環境）とは異なります。
* **プロジェクト**
	* 平たく説明すると一塊のプログラムの基本単位です。
	* 一つのプログラムに必要なソースコード一式とリソース一式をまとめたものです。
	* ワークスペースなどと呼称される場合もありますが、.NET ではプロジェクトと呼称するのが一般的です。
	* Visual Studio では複数のプロジェクトをひとまとめにした**ソリューション**という概念もありますが、`dotnet` コマンドでは殆ど用いない為、ここでは説明を省きます。
		* 「Visual Studio」と「Visual Studio Code」は同一ブランドの異なる製品です。

## ターミナルの開き方
`dotnet` コマンドを呼び出すには、ターミナルを開く必要があります。

* **Visual Studio Code** の場合
	* キーボードで `Ctrl + @` を押下してください。
* コマンドプロンプトを開く場合
	1. `Win + R` を押下してください。
	2. すると、「ファイル名を指定して実行」が開かれる筈です。
	3. 名前欄に「`cmd`」と入力し、エンターキーを押してください。
* エクスプローラから開く場合
	1. フォルダの何も無い所でシフトキーを押しながら右クリックしてください。デスクトップでも構いません。
	2. 「ターミナルで開く」や「コマンドプロンプト」や「PowerShell」を選んでください。
		* Windows 11 の場合は「その他のオプションを確認」を選んでおく必要があるかもしれません。
		* 何れを選んでも構いません。
* ターミナル内でディレクトリを移動するには `cd` コマンドを用います。

## 基本的な書式
`dotnet` コマンドは次の書式で記述します：
```cmd
> dotnet <サブコマンド> [引数...]
```
サブコマンドを指定する事で特定の機能を呼び出す事ができます。

説明書を表示するには次の様に入力します：
```cmd
> dotnet /?
```
サブコマンドの説明書を表示する事もできます：
```cmd
> dotnet <サブコマンド> /?
```

.NET に関する情報は次のコマンドで表示できます：
```cmd
> dotnet --info
```
インストールされたランタイムの一覧は次のコマンドで表示できます：
```cmd
> dotnet --list-runtimes
```
インストールされた SDK の一覧は次のコマンドで表示できます：
```cmd
> dotnet --list-sdks
```
インストールされた .NET SDK のバージョンは次のコマンドで表示できます：
```cmd
> dotnet --version
```

## テンプレートからプロジェクトを生成（`dotnet new`）

## ビルド構成
.NET には、プロジェクト設定を切り替える機能があります。これをビルド構成と呼びます。既定では `Debug` と `Release` の二つが用意されています。改名する事もできますが、基本的には推奨されません。`Debug` はプログラムが正しく動作するか試す為に使われます。最適化を行わなかったり、ソースコードとの対応関係を保持したり、試験時のみに呼び出せるコードを設定したりする事ができます。`Release` はプログラムを利用者に配布する時に使います。最適化が掛かり、効率良く実行させる事ができます。ソースコードとの対応関係は保持されません。

## プロジェクトの復元（`dotnet restore`）

## プロジェクトの構築（`dotnet build`）

## プロジェクトの実行（`dotnet run`）

## プロジェクトの発行（`dotnet publish`）

## 次に調べるべき事
`dotnet` コマンドの使い方が分かったら、次は MSBuild、Roslyn、NuGet などについて調べると良いでしょう。
内部でどの様な動作が行われているか理解が深まると思います。
